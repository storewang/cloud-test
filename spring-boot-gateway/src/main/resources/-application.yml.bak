spring:
  application:
    name: spring-boot-gateway
  cloud:
    nacos:
      discovery:
        # 指定nacos server地址
        server-addr: 192.168.20.13:8848
        ip: 192.168.20.13
    gateway:
      #discovery:
      #  locator:
           # 让gateway通过服务发现组件找到其他微服务
        #  enabled: true
      routes:
          # 唯一标识
        - id: content_time_between_route
          uri: lb://spring-boot-content
          predicates:
            - Path=/content/**
            - TimeBetween=下午2:50,下午11:30
          filters:
            - AddRequestHeader=X-Request-Foo, Bar
            - PreLog=a,b
            # 转发时把/content去掉  ==>(lb://spring-boot-content/**)
            - RewritePath=/content/(?<segment>.*), /$\{segment}
          # 唯一标识
        - id: user_time_between_route
          uri: lb://spring-boot-user
          predicates:
            - Path=/user/**
            - TimeBetween=下午2:50,下午11:30
          filters:
            - AddRequestHeader=X-Request-Foo, Bar
            - PreLog=a,b
            # 转发时把/content去掉  ==>(lb://spring-boot-content/**)
            - RewritePath=/user/(?<segment>.*), /$\{segment}
server:
  port: 8040

management:
  endpoint:
    health:
      show-details: always
  endpoints:
    web:
      exposure:
        include:
        - health
        - info
        - gateway
        - metrics
info:
  app-name: spring-boot-gateway
  author: 石头






